<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Utils.UrlParser</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Utils-UrlParser.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Utils.UrlParser</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Url">Url</a> = <a href="#v:Url">Url</a> {<ul class="subs"><li><a href="#v:scheme">scheme</a> :: ByteString</li><li><a href="#v:authority">authority</a> :: ByteString</li><li><a href="#v:path">path</a> :: ByteString</li></ul>}</li><li class="src short"><a href="#v:formatMaybeAssetUrls">formatMaybeAssetUrls</a> :: [Maybe ByteString] -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; [<a href="Utils-UrlParser.html#t:Url">Url</a>]</li><li class="src short"><a href="#v:formatMaybeLinkedUrls">formatMaybeLinkedUrls</a> :: [Maybe ByteString] -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; [<a href="Utils-UrlParser.html#t:Url">Url</a>]</li><li class="src short"><a href="#v:parseUrl">parseUrl</a> :: ByteString -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></li><li class="src short"><a href="#v:parseUrlRelativeTo">parseUrlRelativeTo</a> :: ByteString -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></li><li class="src short"><a href="#v:parseScheme">parseScheme</a> :: ByteString -&gt; (Maybe ByteString, ByteString)</li><li class="src short"><a href="#v:parseAuthority">parseAuthority</a> :: ByteString -&gt; (Maybe ByteString, ByteString)</li><li class="src short"><a href="#v:parseAuthority-39-">parseAuthority'</a> :: ByteString -&gt; (Maybe ByteString, ByteString)</li><li class="src short"><a href="#v:parsePath">parsePath</a> :: ByteString -&gt; ByteString</li><li class="src short"><a href="#v:normalise">normalise</a> :: ByteString -&gt; ByteString</li><li class="src short"><a href="#v:normalise-39-">normalise'</a> :: ByteString -&gt; [ByteString] -&gt; [ByteString]</li><li class="src short"><a href="#v:endAuthChars">endAuthChars</a> :: String</li><li class="src short"><a href="#v:endPathChars">endPathChars</a> :: String</li><li class="src short"><a href="#v:isValidLinkedUrl">isValidLinkedUrl</a> :: <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; Bool</li><li class="src short"><a href="#v:showUrl">showUrl</a> :: <a href="Utils-UrlParser.html#t:Url">Url</a> -&gt; ByteString</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Url" class="def">Url</a></p><div class="doc"><p>A container for URLs, made up of scheme, authority and path.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Url" class="def">Url</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:scheme" class="def">scheme</a> :: ByteString</dt><dd class="doc"><p>E.g. &quot;http:&quot;</p></dd><dt class="src"><a name="v:authority" class="def">authority</a> :: ByteString</dt><dd class="doc"><p>E.g. &quot;www.example.com&quot;</p></dd><dt class="src"><a name="v:path" class="def">path</a> :: ByteString</dt><dd class="doc"><p>E.g. &quot;<em>dir</em>page.html&quot;</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Url" class="caption collapser" onclick="toggleSection('i:Url')">Instances</p><div id="section.i:Url" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Utils-UrlParser.html#t:Url">Url</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Ord <a href="Utils-UrlParser.html#t:Url">Url</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Utils-UrlParser.html#t:Url">Url</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:formatMaybeAssetUrls" class="def">formatMaybeAssetUrls</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [Maybe ByteString]</td><td class="doc"><p>List of Maybe asset URLs to
   parse</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>The current URL</p></td></tr><tr><td class="src">-&gt; [<a href="Utils-UrlParser.html#t:Url">Url</a>]</td><td class="doc"><p>Returns list of parsed asset
   URLs</p></td></tr></table></div><div class="doc"><p>Parses a list of Maybe linked URLs relative to a given current URL. Returns
   a list of URL objects for valid asset links.</p></div></div><div class="top"><p class="src"><a name="v:formatMaybeLinkedUrls" class="def">formatMaybeLinkedUrls</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [Maybe ByteString]</td><td class="doc"><p>List of Maybe linked URLs to
   parse</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>The current URL</p></td></tr><tr><td class="src">-&gt; [<a href="Utils-UrlParser.html#t:Url">Url</a>]</td><td class="doc"><p>Returns list of parsed linked
   URLs</p></td></tr></table></div><div class="doc"><p>Parses a list of Maybe linked URLs relative to a given current URL. Returns
   a list of URL objects for valid links within the same subdomain.</p></div></div><div class="top"><p class="src"><a name="v:parseUrl" class="def">parseUrl</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>The bytestring URL to be parsed</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>Returns the parsed Url</p></td></tr></table></div><div class="doc"><p>Parses a bytestring representation of a URL into a Url object.
   Scheme is &quot;http:&quot; unless specified as &quot;https:&quot;. Returns &quot;<a href="http:////&quot;">http:////&quot;</a> for any
   other scheme. Will always produce an absolute URL, including authority.
   Returned scheme and authority are lowercase and path is normalised.</p></div></div><div class="top"><p class="src"><a name="v:parseUrlRelativeTo" class="def">parseUrlRelativeTo</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>The linked URL, to be parsed</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>The current URL (parent)</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>Returns the linked URL parsed relative
   to the current URL</p></td></tr></table></div><div class="doc"><p>Parses a bytestring for a linked URL into a Url object, by considering it
   relative to a given current URL.
   If no scheme or authority is specified for the linked URL, uses the current
   URL to guess.
   The linked URL will be considered relative (and the path added to that of
   the current url) iff it:
   - does not begin with &quot;www.&quot;
   - AND does not have a <code>/</code> except for as the first character
      or does not have a <code>.</code> before a <code>/</code> except for as the first character
   Returned scheme and authority are lowercase and path is normalised.</p></div></div><div class="top"><p class="src"><a name="v:parseScheme" class="def">parseScheme</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>The URL to be parsed</p></td></tr><tr><td class="src">-&gt; (Maybe ByteString, ByteString)</td><td class="doc"><p>Returns tuple of Maybe scheme and
   remainder of URL</p></td></tr></table></div><div class="doc"><p>Parses a bytestring to retrieve its scheme if it is &quot;http:&quot; or &quot;https:&quot;
   and the remainder to be parsed.
   If no scheme is found, returns Nothing and the entire URL. If an incorrect
   scheme is found (e.g. &quot;mailto:&quot;) returns Nothing and an empty string.</p></div></div><div class="top"><p class="src"><a name="v:parseAuthority" class="def">parseAuthority</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>The URL (without scheme) to be
   parsed</p></td></tr><tr><td class="src">-&gt; (Maybe ByteString, ByteString)</td><td class="doc"><p>Returns tuple of Maybe authority
   and remainder of the URL</p></td></tr></table></div><div class="doc"><p>Parses a bytestring with scheme removed, to retrieve its authority and the
   and.
   If no authority is found, returns Nothing and the entire URL.</p></div></div><div class="top"><p class="src"><a name="v:parseAuthority-39-" class="def">parseAuthority'</a> :: ByteString -&gt; (Maybe ByteString, ByteString)</p><div class="doc"><p>Helper function for parseAuthority which always returns Url with authority.</p></div></div><div class="top"><p class="src"><a name="v:parsePath" class="def">parsePath</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>The URL (without scheme and authority) to be
   be parsed</p></td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>Returns path without queries and fragments</p></td></tr></table></div><div class="doc"><p>Parses a bytestring with scheme and authority removed, to retrieve its
   path, removing queries and fragments.</p></div></div><div class="top"><p class="src"><a name="v:normalise" class="def">normalise</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc"><p>Absolute path to be normalised, E.g.
   &quot;<em>dir</em>../index.html&quot;</p></td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>Returns normalised path, E.g. &quot;/&quot;</p></td></tr></table></div><div class="doc"><p>Normalises a path by removing dot-segments and references to index.html
   Path *must be absolute* (begins with <code>/</code>).</p></div></div><div class="top"><p class="src"><a name="v:normalise-39-" class="def">normalise'</a> :: ByteString -&gt; [ByteString] -&gt; [ByteString]</p><div class="doc"><p>Helper function for normalise</p></div></div><div class="top"><p class="src"><a name="v:endAuthChars" class="def">endAuthChars</a> :: String</p><div class="doc"><p>Characters which end of authority</p></div></div><div class="top"><p class="src"><a name="v:endPathChars" class="def">endPathChars</a> :: String</p><div class="doc"><p>Characters which signify end of path</p></div></div><div class="top"><p class="src"><a name="v:isValidLinkedUrl" class="def">isValidLinkedUrl</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>The linked URL</p></td></tr><tr><td class="src">-&gt; <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>The current URL to compare agains</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>Returns whether URLs have the same authority</p></td></tr></table></div><div class="doc"><p>Returns true if two URLs have the same subdomain (authority).</p></div></div><div class="top"><p class="src"><a name="v:showUrl" class="def">showUrl</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Utils-UrlParser.html#t:Url">Url</a></td><td class="doc"><p>Url object to be shown</p></td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>Returns URL as lazy bytestring</p></td></tr></table></div><div class="doc"><p>Shows a Url object as a lazy bytestring.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>